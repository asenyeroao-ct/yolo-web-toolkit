<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-i18n="app.title">YOLO Web Toolkit</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="app-wrapper">
        <!-- Sidebar Navigation -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <svg class="logo-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="m12 14 4-4 4 4-4 4-4-4Z"></path>
                        <path d="M3.34 19a10 10 0 1 1 17.32 0"></path>
                    </svg>
                    <h1 data-i18n="app.title">YOLO Convert</h1>
                </div>
            </div>

            <nav class="sidebar-nav tabs">
                <button class="nav-item tab-btn active" data-tab="convert">
                    <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M21 2v6h-6"></path>
                        <path d="M3 12a9 9 0 0 1 15-6.7L21 8"></path>
                        <path d="M3 22v-6h6"></path>
                        <path d="M21 12a9 9 0 0 1-15 6.7L3 16"></path>
                    </svg>
                    <span data-i18n="tabs.convert">Model Convert</span>
                </button>
                <button class="nav-item tab-btn" data-tab="train">
                    <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 4.44-2.54Z"></path>
                        <path d="M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-4.44-2.54Z"></path>
                    </svg>
                    <span data-i18n="tabs.train">Train Model</span>
                </button>
                <button class="nav-item tab-btn" data-tab="tools">
                    <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"></path>
                    </svg>
                    <span data-i18n="tabs.tools">Model Tools</span>
                </button>
                <button class="nav-item tab-btn" data-tab="support">
                    <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"></path>
                        <circle cx="9" cy="7" r="4"></circle>
                        <path d="M22 21v-2a4 4 0 0 0-3-3.87"></path>
                        <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                    </svg>
                    <span data-i18n="tabs.support">Support</span>
                </button>
                <button class="nav-item tab-btn" data-tab="system">
                    <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <rect x="2" y="3" width="20" height="14" rx="2" ry="2"></rect>
                        <line x1="8" y1="21" x2="16" y2="21"></line>
                        <line x1="12" y1="17" x2="12" y2="21"></line>
                    </svg>
                    <span data-i18n="tabs.system">System Info</span>
                </button>
            </nav>

            <div class="sidebar-footer">
                <div class="language-selector">
                    <label for="language-select" class="footer-label">Language</label>
                    <select id="language-select" class="language-select">
                        <option value="en">English</option>
                        <option value="zh-TW" selected>繁體中文</option>
                        <option value="zh-CN">简体中文</option>
                    </select>
                </div>
                
                <div class="social-links">
                    <a href="https://github.com/asenyeroao-ct/yolo-web-toolkit" target="_blank" title="GitHub" class="social-link">
                        <svg class="social-icon" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/>
                        </svg>
                    </a>
                    <a href="https://discord.gg/7dwUjfbP" target="_blank" title="Discord" class="social-link">
                        <svg class="social-icon" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0 12.64 12.64 0 0 0-.617-1.25.077.077 0 0 0-.079-.037 19.736 19.736 0 0 0-4.885 1.515.069.07 0 0 0-.032.027C.533 9.048-.32 13.58.099 18.057a.082.082 0 0 0 .031.057 19.9 19.9 0 0 0 5.993 3.03.078.078 0 0 0 .084-.028 14.09 14.09 0 0 0 1.226-1.994.076.076 0 0 0-.041-.106 13.107 13.107 0 0 1-1.872-.892.077.077 0 0 1-.008-.128 10.23 10.23 0 0 0 .372-.292.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127 12.299 12.299 0 0 1-1.873.892.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028 19.839 19.839 0 0 0 6.002-3.03.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.956-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.955-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.946 2.418-2.157 2.418z"/>
                        </svg>
                    </a>
                </div>
            </div>
        </aside>

        <!-- Main Content Area -->
        <main class="main-content">
            <header class="content-header">
                <h2 id="active-tab-title" data-i18n="convert.title">Model Convert</h2>
                <div class="status-badge" id="system-status">
                    <span class="dot"></span>
                    System Ready
                </div>
            </header>

            <div class="content-body">
                <!-- 模型轉換頁面 -->
                <div id="convert-tab" class="tab-content active">
                    <div class="card">
                        <div class="form-grid">
                            <div class="form-section">
                                <h3 data-i18n="convert.title">Configuration</h3>
                                <div class="form-group">
                                    <label for="conversion-type" data-i18n="convert.conversionType">Conversion Type</label>
                                    <select id="conversion-type" class="form-control">
                                        <option value="pt_to_onnx" data-i18n="conversionTypes.pt_to_onnx">PyTorch (.pt) → ONNX (.onnx)</option>
                                        <option value="pt_to_engine" data-i18n="conversionTypes.pt_to_engine">PyTorch (.pt) → TensorRT Engine (.engine)</option>
                                        <option value="onnx_to_engine" data-i18n="conversionTypes.onnx_to_engine">ONNX (.onnx) → TensorRT Engine (.engine)</option>
                                    </select>
                                </div>

                                <div class="form-group">
                                    <label for="model-select" data-i18n="convert.selectModel">Select Model</label>
                                    <div class="input-group">
                                        <select id="model-select" class="form-control">
                                            <option value="" data-i18n="convert.selectModelPlaceholder">-- Select Model --</option>
                                        </select>
                                        <button id="refresh-models" class="btn btn-secondary" data-i18n="convert.refresh">Refresh</button>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label for="upload-file" data-i18n="convert.uploadModel">Upload Model</label>
                                    <div class="input-group">
                                        <input type="file" id="upload-file" class="form-control" accept=".pt,.pth,.onnx">
                                        <button id="upload-btn" class="btn btn-secondary" data-i18n="convert.upload">Upload</button>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label for="output-folder" data-i18n="convert.outputFolder">Output Folder</label>
                                    <div class="input-group">
                                        <select id="output-folder" class="form-control">
                                            <option value="outputs">outputs</option>
                                        </select>
                                        <button id="refresh-folders" class="btn btn-secondary" data-i18n="convert.refresh">Refresh</button>
                                    </div>
                                </div>
                            </div>

                            <div class="form-section">
                                <h3 data-i18n="convert.outputSize">Parameters</h3>
                                <div class="form-group">
                                    <label data-i18n="convert.outputSize">Output Size</label>
                                    <div class="size-selector">
                                        <div class="preset-sizes">
                                            <label class="size-option"><input type="checkbox" value="128" class="size-checkbox"> 128</label>
                                            <label class="size-option"><input type="checkbox" value="160" class="size-checkbox"> 160</label>
                                            <label class="size-option"><input type="checkbox" value="256" class="size-checkbox"> 256</label>
                                            <label class="size-option"><input type="checkbox" value="320" class="size-checkbox"> 320</label>
                                            <label class="size-option"><input type="checkbox" value="480" class="size-checkbox"> 480</label>
                                            <label class="size-option"><input type="checkbox" value="640" class="size-checkbox" checked> 640</label>
                                        </div>
                                        <div class="custom-size">
                                            <input type="number" id="custom-size" class="form-control" data-i18n-placeholder="convert.customSize" placeholder="Custom Size">
                                            <button id="add-custom-size" class="btn btn-secondary" data-i18n="convert.add">Add</button>
                                        </div>
                                    </div>
                                </div>

                                <div class="form-group" id="engine-options" style="display: none;">
                                    <h3 data-i18n="convert.tensorrtOptions">TensorRT Options</h3>
                                    <div class="form-group">
                                        <label for="tensorrt-version" data-i18n="convert.tensorrtVersion">TensorRT Version</label>
                                        <select id="tensorrt-version" class="form-control">
                                            <option value="8.6">TensorRT 8.6</option>
                                            <option value="8.5">TensorRT 8.5</option>
                                            <option value="8.4">TensorRT 8.4</option>
                                            <option value="8.3">TensorRT 8.3</option>
                                        </select>
                                    </div>
                                    <div class="checkbox-grid">
                                        <label class="checkbox-label"><input type="checkbox" id="enable-fp16"> <span data-i18n="convert.enableFp16">FP16</span></label>
                                        <label class="checkbox-label"><input type="checkbox" id="enable-fp8"> <span data-i18n="convert.enableFp8">FP8</span></label>
                                        <label class="checkbox-label"><input type="checkbox" id="fixed-input-size" checked> <span data-i18n="convert.fixedInputSize">Fixed Size</span></label>
                                    </div>
                                    <div class="form-group mt-10">
                                        <label for="workspace-size" data-i18n="convert.workspaceSize">Workspace (GB)</label>
                                        <input type="number" id="workspace-size" class="form-control" value="1" min="1" max="32">
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="form-actions">
                            <button id="convert-btn" class="btn btn-primary btn-large" data-i18n="convert.startConvert">Start Conversion</button>
                        </div>

                        <div id="progress-container" class="status-container" style="display: none;">
                            <div class="progress-bar"><div id="progress-fill" class="progress-fill"></div></div>
                            <p id="progress-text" class="progress-text"></p>
                        </div>

                        <div id="result-container" class="status-container" style="display: none;">
                            <div class="alert alert-success">
                                <h4 data-i18n="convert.conversionComplete">Complete</h4>
                                <p id="result-message"></p>
                            </div>
                        </div>

                        <div id="error-container" class="status-container" style="display: none;">
                            <div class="alert alert-error">
                                <h4 data-i18n="convert.conversionFailed">Failed</h4>
                                <p id="error-message"></p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 訓練模型頁面 -->
                <div id="train-tab" class="tab-content">
                    <div class="card">
                        <div class="form-grid">
                            <div class="form-section">
                                <h3 data-i18n="train.title">Model Info</h3>
                                <div class="form-group">
                                    <label for="yolo-version" data-i18n="train.yoloVersion">YOLO Version</label>
                                    <select id="yolo-version" class="form-control">
                                        <option value="yolo12">YOLO12</option>
                                        <option value="yolo11">YOLO11</option>
                                        <option value="yolo10">YOLO10</option>
                                        <option value="yolo9">YOLO9</option>
                                        <option value="yolo8">YOLO8</option>
                                        <option value="yolo7">YOLO7</option>
                                        <option value="yolo6">YOLO6</option>
                                        <option value="yolo5">YOLO5</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="model-size" data-i18n="train.modelSize">Model Size</label>
                                    <select id="model-size" class="form-control">
                                        <option value="n">Nano (n)</option>
                                        <option value="s">Small (s)</option>
                                        <option value="m">Medium (m)</option>
                                        <option value="l">Large (l)</option>
                                        <option value="x">XLarge (x)</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label data-i18n="train.imagesFolder">Images Folder</label>
                                    <input type="text" id="images-folder" class="form-control" data-i18n-placeholder="train.imagesFolderPlaceholder" placeholder="Enter images folder path...">
                                </div>
                                <div class="form-group">
                                    <label data-i18n="train.labelsFolder">Labels Folder</label>
                                    <input type="text" id="labels-folder" class="form-control" data-i18n-placeholder="train.labelsFolderPlaceholder" placeholder="Enter labels folder path...">
                                </div>
                            </div>

                            <div class="form-section">
                                <h3 data-i18n="train.trainingOptions">Parameters</h3>
                                <div class="form-group">
                                    <label data-i18n="train.outputDestination">Output Destination</label>
                                    <input type="text" id="output-destination" class="form-control" data-i18n-placeholder="train.outputDestinationPlaceholder" placeholder="Enter output destination path...">
                                </div>
                                <div class="form-row">
                                    <div class="form-group">
                                        <label data-i18n="train.epochs">Epochs</label>
                                        <input type="number" id="epochs" class="form-control" value="100">
                                    </div>
                                    <div class="form-group">
                                        <label data-i18n="train.batchSize">Batch Size</label>
                                        <input type="number" id="batch-size" class="form-control" value="16">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label data-i18n="train.imageSize">Image Size</label>
                                    <input type="number" id="image-size" class="form-control" value="640">
                                </div>
                                <label class="checkbox-label"><input type="checkbox" id="resume-training"> <span data-i18n="train.resumeTraining">Resume Training</span></label>
                                
                                <!-- 優化選項 -->
                                <div class="optimization-section" style="margin-top: 20px; padding-top: 20px; border-top: 1px solid var(--border-color);">
                                    <label class="checkbox-label" style="margin-bottom: 15px;">
                                        <input type="checkbox" id="enable-optimization"> 
                                        <span data-i18n="train.enableOptimization">啟用優化模式（數據集清理、探針訓練、動態超參數）</span>
                                    </label>
                                    
                                    <div id="optimization-options" style="display: none; margin-top: 15px;">
                                        <h4 style="margin-bottom: 15px; font-size: 14px; font-weight: 600;" data-i18n="train.datasetCleaning">數據集清理選項</h4>
                                        
                                        <div class="form-row">
                                            <div class="form-group">
                                                <label data-i18n="train.minBoxWidth">最小框寬度 (像素)</label>
                                                <input type="number" id="min-w" class="form-control" value="14" min="1">
                                                <small style="color: var(--text-secondary); font-size: 12px;" data-i18n="train.minBoxWidthDesc">移除寬度小於此值的框</small>
                                            </div>
                                            <div class="form-group">
                                                <label data-i18n="train.minBoxHeight">最小框高度 (像素)</label>
                                                <input type="number" id="min-h" class="form-control" value="24" min="1">
                                                <small style="color: var(--text-secondary); font-size: 12px;" data-i18n="train.minBoxHeightDesc">移除高度小於此值的框</small>
                                            </div>
                                        </div>
                                        
                                        <div class="form-group">
                                            <label data-i18n="train.maxInstances">最大實例數量</label>
                                            <input type="number" id="max-instances" class="form-control" value="6" min="1">
                                            <small style="color: var(--text-secondary); font-size: 12px;" data-i18n="train.maxInstancesDesc">每張圖像最多保留的實例數量</small>
                                        </div>
                                        
                                        <h4 style="margin-top: 20px; margin-bottom: 15px; font-size: 14px; font-weight: 600;" data-i18n="train.validationSet">驗證集選項</h4>
                                        
                                        <div class="form-row">
                                            <div class="form-group">
                                                <label data-i18n="train.valSplit">驗證集比例</label>
                                                <input type="number" id="val-split" class="form-control" value="0.15" step="0.01" min="0.01" max="0.5">
                                            </div>
                                            <div class="form-group">
                                                <label data-i18n="train.bgValRatio">背景圖像比例</label>
                                                <input type="number" id="bg-val-ratio" class="form-control" value="0.08" step="0.01" min="0" max="1">
                                            </div>
                                        </div>
                                        
                                        <h4 style="margin-top: 20px; margin-bottom: 15px; font-size: 14px; font-weight: 600;" data-i18n="train.probeTraining">探針訓練選項</h4>
                                        
                                        <div class="form-group">
                                            <label data-i18n="train.probeEpochs">探針訓練輪數</label>
                                            <input type="number" id="probe-epochs" class="form-control" value="80" min="20" max="200">
                                            <small style="color: var(--text-secondary); font-size: 12px;" data-i18n="train.probeEpochsDesc">用於分析模型學習速度的短期訓練</small>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="form-actions">
                            <button id="train-btn" class="btn btn-primary btn-large" data-i18n="train.startTraining">Start Training</button>
                        </div>

                        <div id="train-progress-container" class="status-container" style="display: none;">
                            <div class="progress-bar"><div id="train-progress-fill" class="progress-fill"></div></div>
                            <p id="train-progress-text" class="progress-text"></p>
                            <div class="training-metrics-container">
                                <h4 data-i18n="train.trainingMetrics">Training Metrics</h4>
                                <div class="metrics-table-wrapper">
                                    <table id="training-metrics-table" class="metrics-table">
                                        <thead>
                                            <tr>
                                                <th data-i18n="train.metricEpoch">Epoch</th>
                                                <th data-i18n="train.metricGpuMem">GPU_mem</th>
                                                <th data-i18n="train.metricBoxLoss">box_loss</th>
                                                <th data-i18n="train.metricClsLoss">cls_loss</th>
                                                <th data-i18n="train.metricDflLoss">dfl_loss</th>
                                                <th data-i18n="train.metricInstances">Instances</th>
                                                <th data-i18n="train.metricSize">Size</th>
                                            </tr>
                                        </thead>
                                        <tbody id="training-metrics-body">
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                            <div class="training-log-container">
                                <h4 data-i18n="train.trainingLog">Training Log</h4>
                                <div id="train-log-output" class="train-log-output"></div>
                            </div>
                        </div>

                        <div id="train-result-container" class="status-container" style="display: none;">
                            <div class="alert alert-success">
                                <h4 data-i18n="train.trainingComplete">Complete</h4>
                                <p id="train-result-message"></p>
                            </div>
                        </div>

                        <div id="train-error-container" class="status-container" style="display: none;">
                            <div class="alert alert-error">
                                <h4 data-i18n="train.trainingFailed">Failed</h4>
                                <p id="train-error-message"></p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 工具頁面 -->
                <div id="tools-tab" class="tab-content">
                    <div class="card">
                        <div class="tabs-sub">
                            <button class="tab-sub-btn active" data-subtab="validate" data-i18n="tools.validateAnalyze">Validate & Analyze</button>
                            <button class="tab-sub-btn" data-subtab="map" data-i18n="tools.mapCalculation">mAP Calculation</button>
                        </div>
                        
                        <!-- 驗證與分析子頁面 -->
                        <div id="validate-subtab" class="subtab-content active">
                            <div class="form-grid">
                                <div class="form-section full-width">
                                    <h3 data-i18n="tools.modelSelection">Model Selection</h3>
                                    <div class="form-group">
                                        <label for="tools-model-select" data-i18n="convert.selectModel">Select Model</label>
                                        <div class="input-group">
                                            <select id="tools-model-select" class="form-control">
                                                <option value="" data-i18n="convert.selectModelPlaceholder">-- Select Model --</option>
                                            </select>
                                            <button id="tools-refresh-models" class="btn btn-secondary" data-i18n="convert.refresh">Refresh</button>
                                        </div>
                                    </div>
                                    <div class="form-actions">
                                        <button id="validate-btn" class="btn btn-primary" data-i18n="tools.validateAnalyzeBtn">Start Validate & Analyze</button>
                                    </div>
                                </div>
                            </div>

                            <div id="validate-result-container" class="status-container" style="display: none;">
                                <div class="result-grid">
                                    <div class="result-card">
                                        <h4 data-i18n="tools.validationResult">Validation Result</h4>
                                        <div id="validation-output" class="result-content"></div>
                                    </div>
                                    <div class="result-card">
                                        <h4 data-i18n="tools.analysisResult">Analysis Result</h4>
                                        <div id="analysis-output" class="result-content"></div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- mAP 計算子頁面 -->
                        <div id="map-subtab" class="subtab-content">
                            <div class="form-grid">
                                <div class="form-section">
                                    <h3 data-i18n="tools.configuration">Configuration</h3>
                                    <div class="form-group">
                                        <label data-i18n="tools.dataYaml">Data Config (data.yaml)</label>
                                        <div class="input-group">
                                            <input type="text" id="data-yaml-path" class="form-control" placeholder="Path to data.yaml">
                                            <input type="file" id="upload-yaml" class="hidden-input" accept=".yaml,.yml">
                                            <button id="browse-yaml-btn" class="btn btn-secondary" data-i18n="train.browse">Browse</button>
                                        </div>
                                    </div>
                                    <div class="form-row">
                                        <div class="form-group">
                                            <label data-i18n="tools.confThreshold">Conf Threshold</label>
                                            <input type="number" id="conf-threshold" class="form-control" value="0.25" step="0.01" min="0" max="1">
                                        </div>
                                        <div class="form-group">
                                            <label data-i18n="tools.iouThreshold">IoU Threshold</label>
                                            <input type="number" id="iou-threshold" class="form-control" value="0.45" step="0.01" min="0" max="1">
                                        </div>
                                    </div>
                                    <div class="form-actions">
                                        <button id="map-btn" class="btn btn-primary" data-i18n="tools.calculateMap">Calculate mAP</button>
                                    </div>
                                </div>
                            </div>

                            <div id="map-progress-container" class="status-container" style="display: none;">
                                <div class="loader"></div>
                                <p data-i18n="tools.calculating">Calculating...</p>
                            </div>

                            <div id="map-result-container" class="status-container" style="display: none;">
                                <div class="metrics-cards">
                                    <div class="metric-card">
                                        <span class="metric-label">mAP@0.5</span>
                                        <span class="metric-value" id="map-50-value">-</span>
                                    </div>
                                    <div class="metric-card">
                                        <span class="metric-label">mAP@0.5:0.95</span>
                                        <span class="metric-value" id="map-50-95-value">-</span>
                                    </div>
                                    <div class="metric-card">
                                        <span class="metric-label">Precision</span>
                                        <span class="metric-value" id="precision-value">-</span>
                                    </div>
                                    <div class="metric-card">
                                        <span class="metric-label">Recall</span>
                                        <span class="metric-value" id="recall-value">-</span>
                                    </div>
                                </div>
                                <div class="per-class-map">
                                    <h4 data-i18n="tools.perClassMap">Per-Class mAP</h4>
                                    <div class="metrics-table-wrapper">
                                        <table class="metrics-table">
                                            <thead>
                                                <tr>
                                                    <th data-i18n="tools.class">Class</th>
                                                    <th>mAP@0.5</th>
                                                </tr>
                                            </thead>
                                            <tbody id="per-class-map-body"></tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 支援頁面 -->
                <div id="support-tab" class="tab-content">
                    <div class="card support-card">
                        <div class="support-grid">
                            <section class="support-section">
                                <h3 data-i18n="support.github">GitHub</h3>
                                <p data-i18n="support.githubDesc">Source code and documentation.</p>
                                <a href="https://github.com/asenyeroao-ct/yolo-web-toolkit" target="_blank" class="btn btn-secondary">
                                    <svg class="btn-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                        <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path>
                                        <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
                                    </svg>
                                    <span data-i18n="support.visitGithub">Visit GitHub</span>
                                </a>
                            </section>

                            <section class="support-section">
                                <h3 data-i18n="support.discord">Discord</h3>
                                <p data-i18n="support.discordDesc">Community and support.</p>
                                <a href="https://discord.gg/7dwUjfbP" target="_blank" class="btn btn-secondary">
                                    <svg class="btn-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                        <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
                                    </svg>
                                    <span data-i18n="support.joinDiscord">Join Discord</span>
                                </a>
                            </section>
                        </div>

                        <section class="support-section mt-30">
                            <h3 data-i18n="support.contributors">Contributors</h3>
                            <div class="contributors">
                                <div class="contributor">
                                    <strong data-i18n="support.mainDeveloper">Lead Developer</strong>
                                    <p>asenyeroao</p>
                                </div>
                                <div class="contributor">
                                    <strong data-i18n="support.contributor">Contributor</strong>
                                    <p data-i18n="support.contributorList">Team list here</p>
                                </div>
                            </div>
                        </section>

                        <section class="support-section mt-30">
                            <h3 data-i18n="support.about">About</h3>
                            <p data-i18n="support.aboutDesc">Unified tool for YOLO optimization and training.</p>
                        </section>
                    </div>
                </div>

                <!-- 系統資訊頁面 -->
                <div id="system-tab" class="tab-content">
                    <div class="card">
                        <div class="system-info-grid">
                            <div class="form-section">
                                <h3 data-i18n="system.gpuTitle">GPU Information</h3>
                                <div id="gpu-list-container">
                                    <div class="loader"></div>
                                </div>
                                <div class="form-group mt-20">
                                    <label for="gpu-select" data-i18n="system.selectGpu">Select Active GPU</label>
                                    <div class="input-group">
                                        <select id="gpu-select" class="form-control">
                                            <option value="" data-i18n="system.noGpu">No GPU detected</option>
                                        </select>
                                        <button id="set-gpu-btn" class="btn btn-primary" data-i18n="system.apply">Apply</button>
                                    </div>
                                    <small class="help-text" data-i18n="system.gpuNotice">Note: Changing GPU will restart the CUDA context.</small>
                                </div>
                            </div>

                            <div class="form-section">
                                <h3 data-i18n="system.statusTitle">Library Status</h3>
                                <div class="status-list">
                                    <div class="status-item">
                                        <span class="status-label">CUDA</span>
                                        <span id="cuda-status" class="status-value badge">-</span>
                                    </div>
                                    <div class="status-item">
                                        <span class="status-label">CUDA Version</span>
                                        <span id="cuda-version" class="status-value">-</span>
                                    </div>
                                    <div class="status-item">
                                        <span class="status-label">TensorRT</span>
                                        <span id="trt-status" class="status-value badge">-</span>
                                    </div>
                                    <div class="status-item">
                                        <span class="status-label">TensorRT Version</span>
                                        <span id="trt-version" class="status-value">-</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script src="i18n.js"></script>
    <script src="app.js"></script>
</body>
</html>
